webpackJsonp([0],{390:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(6),s=r(c),u=n(394),p=r(u),f=n(0),d=r(f),m=n(26);n(401);var g=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={link:"",article:null,content:null,series:null,pageNav:null,pageNavPn:null,onscrollF:void 0},n}return i(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.match.url;this.state.link!==n&&fetch("/api"+n).then(function(e){return e.json()}).then(function(e){t.setState({link:n,content:e.content,article:e.article,series:e.series,pageNav:e.pageNav,pageNavPn:e.pageNavPn},function(){document.body.scrollTop=0;var e=document.getElementsByTagName("img"),n=Array.from(e),r=t.onscorllF(n);t.setState({onscorllF:r},function(){document.onscroll=r})})})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.url;this.state.link!==t&&fetch("/api"+t).then(function(e){return e.json()}).then(function(n){e.setState({link:t,content:n.content,article:n.article,series:n.series,pageNav:n.pageNav,pageNavPn:n.pageNavPn},function(){var t=document.getElementsByTagName("img"),n=Array.from(t),r=e.onscorllF(n);e.setState({onscrollF:r},function(){document.onscroll=r});for(var a=document.getElementById("toc").getElementsByTagName("a"),o=0;o<a.length;o++)a.item(o).addEventListener("click",function(e){e.preventDefault()});document.getElementById("toc").addEventListener("click",function(e){if("a"===e.target.tagName.toLowerCase()){var t=e.target.getAttribute("href").slice(1),n=document.getElementById(t);n&&n.scrollIntoView()}})})})}},{key:"onscorllF",value:function(e){return function(t){for(var n=window.scrollY,r=window.innerHeight,a=n+r,o=0;o<e.length;o++){var i=e[o];if(!(i.offsetTop<a+300))break;var l=i.getAttribute("data-src");l&&i.setAttribute("src",l);var c=i.getAttribute("class");c?c+=" load":c="load",i.setAttribute("class",c),e.splice(o,1),o=0,0===e.length&&(document.onscroll=null)}0===e.length&&(document.onscroll=null)}}},{key:"componentWillMount",value:function(){document.onscroll=null}},{key:"render",value:function(){return s.default.createElement("div",{id:"article"},s.default.createElement(h,{article:this.state.article,content:this.state.content}),s.default.createElement(v,{series:this.state.series,article:this.state.article}),s.default.createElement(p.default,{pageNav:this.state.pageNav,pageNavPn:this.state.pageNavPn}))}}]),t}(s.default.PureComponent);t.default=g;var h=function(e){var t=e.article,n=e.content;return null===t?null:s.default.createElement("div",null,s.default.createElement("div",{dangerouslySetInnerHTML:{__html:n}}),s.default.createElement("div",{className:"eof"},"--EOF--"),s.default.createElement("div",{className:"post-info"},"发表于",s.default.createElement("span",{className:"time"},(0,d.default)(t.meta.createAt).format("YYYY-MM-DD")),"并被添加「",s.default.createElement("span",null,t.categories.map(function(e,t){return s.default.createElement("span",{className:"tag",key:e},s.default.createElement(m.Link,{to:"/search"},e))})),"」标签，最后修改于",s.default.createElement("span",{className:"time"},(0,d.default)(t.meta.updateAt).format("YYYY-MM-DD"))))},v=function(e){var t=e.series,n=e.article;return t?s.default.createElement("div",{id:"arti-series"},s.default.createElement("h3",{className:"series-info"},"专题「",n.series[0],"」相关的其他文章 ",s.default.createElement(m.Link,{to:"/series"})," » "),s.default.createElement("ul",{className:"series-ul"},t.articles.map(function(e){return s.default.createElement("li",{key:e.title},s.default.createElement(m.Link,{to:e.link},e.title),s.default.createElement("span",{className:"time"},(0,d.default)(e.meta.createAt).format("MMM DD, YYYY")))}))):null}},394:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(6),c=function(e){return e&&e.__esModule?e:{default:e}}(l),s=n(26);n(402);var u=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"render",value:function(){return this.props.pageNav?c.default.createElement("nav",{id:"page-nav"},c.default.createElement(s.Link,{to:this.props.pageNavPn.prev,className:"prev"},this.props.pageNav.prev),c.default.createElement(s.Link,{to:this.props.pageNavPn.next,className:"next"},this.props.pageNav.next),c.default.createElement("div",{className:"center"},c.default.createElement(s.Link,{to:"/archives"},this.props.pageNav.center))):c.default.createElement("nav",{id:"page-nav"})}}]),t}(c.default.PureComponent);t.default=u},396:function(e,t,n){t=e.exports=n(33)(void 0),t.push([e.i,"#article {color: #444; line-height: 1.6; word-wrap: break-word;}\n#article .load{height: auto!important;}\n#article h1 {color: #333; font-size: 2rem; font-weight: 400; line-height: 35px;}\n#article h2 {font-size: 1.6rem;}\n#article h3 {font-size: 1.4rem;}\n#article h4 {font-size: 1.1rem;}\n#article h5, #article h6 {font-size: 1.0rem;}\n#article ol, #article ul, #article dl {margin-left: 25px;}\n#article li {font-size: 96%;}\n#article p, #article h2, #article h3, #article h4, #article h5, #article h6, #article ol, #article ul, #article dl, #conent blockquote, #article pre  {margin-top: 15px;}\n#article a {color: #538ED5;}\n#article a:hover {text-decoration: underline;}\n#article pre {background-color: #f8f8f8; border-left: 5px solid #ccc; color: #666; font-size: 14px; line-height: 1.6; overflow: hidden; padding: 0.6rem; position: relative; white-space: pre-wrap; word-break: break-word; word-wrap: break-word;}\n#article code {background-color: #eee; border-radius: 5px;font-size: 90%; margin: 0 2px; padding: 2px 5px; vertical-align: middle;}\n#article pre code {background-color: transparent; border-radius: 0; font-size: 100%; margin: 0; padding: 0;}\n#article img {border: 1px solid #ccc; display: block; margin: 10px 5px; max-width: 96%;}\n#article .eof{margin-top: 20px;}\n#article .post-info {margin-top: 20px; font-size: 14px;}\n#article span.time {color: #999; margin: 0 4px;}\n#article .tag a{text-decoration: none;}\n#article .tag:after {content: '\\3001';}\n#article .tag:last-child:after {content: '';}\n#article .series-info a {text-decoration: none;font-size: 14px;margin-left: 4px;}\n#article .series-ul .time {font-size: 14px;margin-left: 10px;}\n#article #comments {margin-top: 20px; padding-top: 20px; border-top: 1px solid #ccc;}\n#article #toc {float: right; border: 1px solid #ccc; padding: 10px; max-width: 260px; min-width: 120px; margin: 0 0 15px 20px;}\n#article #toc ul{margin-left: 14px;}\n#article #toc>header{text-align: center; border-bottom: 1px solid #ccc; margin: -6px 0 6px;}\n@media screen and (max-width: 640px) {\n    #article  #toc {float: none; box-sizing: 100%; max-width: 100%; margin: 0 0 20px;}\n}",""])},397:function(e,t,n){t=e.exports=n(33)(void 0),t.push([e.i,"#page-nav { margin-top: 20px; color: #538ED5; border-top: 1px solid #ccc; padding-top: 20px;overflow: hidden;}\n.prev {float: left; text-decoration: none; color: #538ED5;}\n.next {float: right; text-decoration: none; color: #538ED5;}\n.center {margin: 0 auto; text-align: center;width: 80px;}\n.center a {color: #538ED5;}",""])},401:function(e,t,n){var r=n(396);"string"==typeof r&&(r=[[e.i,r,""]]);var a={};a.transform=void 0;n(34)(r,a);r.locals&&(e.exports=r.locals)},402:function(e,t,n){var r=n(397);"string"==typeof r&&(r=[[e.i,r,""]]);var a={};a.transform=void 0;n(34)(r,a);r.locals&&(e.exports=r.locals)}});